---
title: "Configurar y usar DigiKam"
date: last-modified
author:
  - name: Gabriel Andrade-Ponce 
    url: https://gpandradep.github.io/gpandradep/
    affiliation: Instituto de Ecolog칤a A.C.
    
format:
  html:
    toc: true
    toc-depth: 3
    toc-title: Contenido
    theme: journal 
editor: visual
bibliography: references.bib
---

# Pasos para configurar DigiKam

Una vez instalado DigiKam tenemos que configurarlo y generar la carpeta donde se guardaran los archivos SQL que contendr치n toda la informaci칩n de meta-datos.

1.  Si es la primera vez que abres DigiKam se abrir치 una ventana de bienvenida, en la cual le das siguiente

2.  **Configurar carpeta de im치genes**: Seleccionar la carpeta donde est치n guardadas tus im치genes. Lo importante de este punto es que sea una carpeta local. Mucho cuidado con escoger una carpeta en un disco extraible o usb. Por ahora la mejor opci칩n es ubicar el directorio en donde est치n nuestras im치genes a trabajar

3.  **Configurar carpeta de bases de datos**: Ahora te pide saber en que carpeta guardara el SQL. Este paso es muy importante porque si pierden estos archivos DigiKam no funcionar치. Porfavor, no uses una carpeta de una usb o disco extraible

4.  **Configurar archivos raw**: Esta opci칩n la dejamos por defecto y continuamos

5.  **Configurar almacenamiento de meta-datos**: En este punto le damos que si queremos a침adir la informaci칩n a los archivos. Esto hace que guarde los metadatos cuando lo indiquemos y son precisamente los que se usar치n en CamtrapR

6.  Todos los dem치s pasos los dejaremos por defecto y pondremos siguiente hasta que lleguemos a finalizar.

7.  Ya una vez iniciado Digikam iremos a la pesta침a de preferencias y configuraci칩n de DigiKam. Se desplegara una ventana y en la secci칩n izquierda unos iconos. Por ahora nos centraremos en meta-datos. En la parte inferior marcaremos la opci칩n de actualizar fecha de modificaci칩n del archivo cuando se modifique. 칄sto es importante porque necesitamos la fecha original del archivo ya que es la fecha de registro de la foto

![](img/Digi7.png){fig-align="center" width="520"}

# Agregar colecciones

## Paso previo: limpiar fotos

Debido a que una gran cantidad de fotos puede llegar a saturar DigiKam en computadores con bajo poder de procesador. Es recomendable primero realizar la limpieza de las fotos, es decir eliminar las fotos sin registros. De esta forma solo se ingresan a DigiKam la fotos de inter칠s o donde hay registros.

Si en la secci칩n anterior en el paso 2 agregaste la carpeta o colecci칩n donde est치n tus c치maras trampa deben aparecer ya tus carpetas. Si no, simplemente ve de nuevo a la pesta침a de preferencias a colecciones y agrega la carpeta donde est치n las carpetas de tus c치maras. Nota que en esta secci칩n si puedes agregar colecciones en medios extraviarles usando la opci칩n para ello.

![](img/coleccion.png){width="529"}

Si todo sale bien en la parte izquierda de DigiKam en la pesta침a de 츼lbumes aparecer치 la carpeta, con las subcapetas de cada estaci칩n. **La organizaci칩n es importante para el posterior an치lisis en R: Necesitas seleccionar la carpeta que ser치 tu 치lbum y dentro tendr치s una carpeta por cada estaci칩n de muestreo que contendr치 sus respectivas fotos**

![](img/fotos.png)

# Etiquetar fotos

Ya tenemos nuestras fotos en DigiKam, ahora vamos a empezar a identificar y etiquetar los registros que tenemos en cada estaci칩n.

1.  Lo primero que haremos es generar la etiqueta de especie. Para ello iremos a la parte izquierda de la ventana de DigiKam y daremos clic en la pesta침a de 1) Etiquetas, 2) Abrir gestor de etiquetas, 3) "+" para agregar una nueva etiqueta, 4) la llamaremos etiqueta de *Species*

![](img/etiqueta.png){fig-align="center"}

2.  Ya tenemos nuestra primera etiqueta, ahora vamos a ver que especies tenemos en las fotos. Voy a seleccionar la carpeta C1 y voy a ver la vista previa de la primera fotograf칤a.

    ![](img/foto1.png){width="505"}

Es un coyote lo que vemos en esa foto 游냨 y su nombre cient칤fico es *Canis latrans*. Pues bien, vamos a crear la etiqueta para esta especie. Regresaremos a la pesta침a de etiquetas y luego a gestionar etiquetas. En este punto es importante que antes de crear la etiqueta, **seleccionemos la etiqueta de Species previamente generada.** Esto es importante porque las etiquetas son jer치rquicas, es decir que la etiqueta que vamos a crear se va a ubicar dentro de la etiqueta de Species.

![](img/etiqueta1.png){fig-align="center" width="547"}

3.  Para aplicar la etiqueta regresaremos a los 츼lbumes y a la vista previa de la imagen del coyote. Una vez seleccionada la imagen 1) dir칤gete a la parte derecha de la ventana de DigiKam a la pesta침a que dice **Pies de foto**, 2) En la ventana que se despliega dirigete a la pesta침a de etiquetas, 3) ver치s que est치n las etiquetas disponibles y en este caso seleccionaremos a *Canis latrans*. 4) Finalmente le damos en aplicar. Puedes ver que al hacerlo ahora aparece debajo de la imagen la etiqueta de *Canis latrans*.

![](img/aplicaetiquet.png){fig-align="center" width="537"}

Muy bien. Ahora tenemos que repetir el proceso para cada una de las fotos. Estas son las especies:

-   Coyote = *Canis latrans*

-   Liebre de California = *Lepus californicus*

-   Lince rojo = *Lynx rufus*

-   Zopilote o buitre aura = *Cathartes aura*

    ### Importante

    Una vez termines de etiquetar las fotograf칤as de cada c치mara, debes seleccionar las todas las fotos de la carpeta. 칄sto puedes hacerlo con shift + seleccionar todas las fotos o con Ctrl + A. Luego de seleccionar todas las fotos de la carpeta te vas a la pesta침a de pie de fotos y en la parte inferior, justo debajo del bot칩n de "aplicar", hay un bot칩n de "M치s". Dale clic a este bot칩n y luego seleccionas **escribir metadatos en cada archivo.** Si no completas este paso, los metadatos no se escribir치n en las fotos originales y por lo tanto no funcionar치 camtrapR.

    ![](img/escribirmeta.png){width="524"}

## Otras etiquetas

Es posible generar diferentes etiquetas dependiendo de los objetivos e intereses del estudio. Por ejemplo, puedes asignar etiquetas para individuos identificados, sexo o comportamientos. Lo importante aqu칤 es que deben ser etiquetas independientes, o con una jerarqu칤a diferente de la de especie.

# Adicionales

Felicidades por llegar hasta este punto. DigiKam es la opci칩n que yo he usado con mayor frecuencia para organizar mis fotograf칤as, pero no es la 칰nica opci칩n. Existen diferentes aproximaciones para enfrentarse a la sistematizaci칩n de fotograf칤as. Como en todo, en los gustos est치n los colores y quiz치s para muchos sean m치s sencillo trabajar otra plataforma. As칤 que si les pica la curiosidad les quiero mencionar otras alternativas muy interesantes que pueden aprender por si solos.

### [Timelapse: An Image Analyser for camera traps](https://saul.cpsc.ucalgary.ca/timelapse/)

Timelapse es un software gratuito enfocado para la visualizaci칩n y organizaci칩n de fotograf칤as de c치maras trampa. No lo he usado mucho, pero lo poco que he explorado es mucho m치s liviano y con m치s opciones que DigiKam (recuerden que DigiKam no es para c치maras trampa). En el puedes agregar etiquetas que guarda en una base de datos, pero desconozco si quedan guardadas en las im치genes. Quiz치s lo "complicado" es que se basa en un sistema de "templates" donde tu agregas los campos o "etiquetas" que necesitas en tu proyecto. Otra ventaja interesante es que tiene integrado a MegaDetector un algoritmo para la clasificaci칩n autom치tica de fotograf칤as, cosa que puede facilitar el trabajo en proyectos gigantes. Aun as칤 hay que probar la eficacia de este tipo de algoritmos en especies neo tropicales. Tiene manuales detallados y videos de ayuda que facilitan entenderlo.

![](img/timelapse.png)

### [Camelot](https://camelotproject.org/)

Camelot es otro software enfocado en c치maras trampa un poco m치s elegante que TimeLapse y con varias opciones de m치s en las especificaciones del proyecto. Estas opciones extra pueden hacer la curva de aprendizaje algo mayor al principio, pero cuenta tambi칠n con manuales bien espec칤ficos. Adem치s, los autores lo siguen manteniendo y contestan cualquier duda o problema que se tenga. Tiene tambi칠n incluido la opci칩n de usar a MegaDetector para la casificaci칩n autom치tica de fotos. Spoiler: Tambi칠n tiene flexibilidad en los reportes que genera e incluye pensado para conectarse con camtrapR.

![](img/camelot.png)

### [Wildlife Insights](https://www.wildlifeinsights.org/)

Wildlife Insights es una plataforma dedicada al almacenamientos y procesamiento de datos de c치maras trampa. Requiere de una cuenta y conexi칩n a Internet. Esta dise침ada para usar algoritmos de machine learning para organizar y etiquetar fotograf칤as. Adem치s, es capaz de generar diferentes tipos de salidas gr치ficas o bases de datos. Los datos se suben al portal tienen un embargo de meses y posteriormente se vuelven p칰blicos. Lo bueno es que sus algoritmos tienen bastante entrenamiento con especies de los tr칩picos.

![](img/Wildlife.png)

## Fuentes adicionales

Cada vez son m치s personas y m치s grandes los proyectos con c치mras trampa. Analizar este tipo de informaci칩n de la manera mas eficaz y eficiente es crucial no solo para nuestras tesis sino tambi칠n porque la conservaci칩n muchas veces requiere resultados inmediatos. Por ello, las maneras de analizar este tipo de datos ir치n evolucionando y cambiando. Por eso les dejo aqu칤 estos dos art칤culos generales que pueden ayudarles a tener una visi칩n general del fototrampeo.

[Lizcano, D. J. (2018). Trampas c치mara como herramienta para estudiar mam칤feros silvestres. *Mammalogy Notes*, *5*(1-2), 31-35.](https://mammalogynotes.org/ojs/index.php/mn/article/view/104)

Adem치s si est치n interesados en los algoritmos de reconocimiento autom치tico de fotos les dejo esta guia. Este es un tema que puede ser complicado para muchas personas, pero creo que aqu칤 se hace un buen primer trabajo para quienes quieren entrar al tema (Igual requiere tener buen ingl칠s y algo de experiencia con c칩digo)

[Velez and Fieberg 2022. Guide for using artificial intelligence platforms for camera-trap data processing](https://ai-camtraps.netlify.app/)
